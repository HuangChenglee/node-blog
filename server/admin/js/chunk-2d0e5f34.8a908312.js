(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e5f34"],{9755:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("a-table",{attrs:{columns:t.columns,"data-source":t.data,loading:t.loading,pagination:!1,bordered:""},scopedSlots:t._u([{key:"categories",fn:function(e){return t._l(e,(function(e){return o("a-tag",{key:e.name,attrs:{color:"green"}},[t._v(t._s(e.name))])}))}},{key:"action",fn:function(e){return[o("span",[o("a",{on:{click:function(o){return o.preventDefault(),t.handleUpdate(e)}}},[t._v("Update")]),o("a-divider",{attrs:{type:"vertical"}}),o("a",{on:{click:function(o){return o.preventDefault(),t.showDeleteConfirm(e)}}},[t._v("Delete")])],1)]}}])}),o("a-modal",{attrs:{title:"修改",visible:t.visible,width:900},on:{ok:t.handleOk,cancel:t.handleCancel}},[o("a-form-model",{ref:"Form",attrs:{model:t.form,rules:t.rules,"label-col":{span:3},"wrapper-col":{span:20}}},[o("a-form-model-item",{ref:"title",attrs:{label:"标题",prop:"title"}},[o("a-input",{on:{blur:function(){t.$refs.title.onFieldBlur()}},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("a-form-model-item",{ref:"categories",attrs:{label:"分类",prop:"categories"}},[o("a-select",{attrs:{mode:"multiple"},on:{blur:function(){t.$refs.categories.onFieldBlur()}},model:{value:t.form.categories,callback:function(e){t.$set(t.form,"categories",e)},expression:"form.categories"}},t._l(t.categories,(function(e){return o("a-select-option",{key:e._id,attrs:{value:e._id}},[t._v(t._s(e.name))])})),1)],1),o("a-form-model-item",{ref:"abstract",attrs:{label:"简介",prop:"abstract"}},[o("a-textarea",{attrs:{placeholder:"简介",rows:4},model:{value:t.form.abstract,callback:function(e){t.$set(t.form,"abstract",e)},expression:"form.abstract"}})],1),o("a-form-model-item",{ref:"content",attrs:{label:"内容",prop:"content"}},[o("quill-editor",{attrs:{options:{placeholder:"开始编辑......"}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1)],1)],1)},a=[],i=o("b85c"),r=o("acd6"),l=o("b050"),c=(o("a753"),o("8096"),o("14e1"),o("953d")),s=[{title:"标题",dataIndex:"title",width:1,key:"Title",sorter:function(t,e){return t.title.length-e.title.length}},{title:"分类",dataIndex:"categories",width:1,scopedSlots:{customRender:"categories"}},{title:"操作",key:"action",width:1,scopedSlots:{customRender:"action"}}],u={created:function(){this.requestData()},data:function(){return{data:[],columns:s,visible:!1,categories:[],form:{title:"",content:"",categories:[],abstract:""},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],categories:[{required:!0,message:"分类不能为空",trigger:"blur"}]},nowId:null,title:null,loading:!1}},methods:{handleUpdate:function(t){this.visible=!0,this.nowId=t._id,this.form.title=t.title,this.form.content=t.content,this.form.abstract=t.abstract,this.form.categories=[];var e,o=Object(i["a"])(t.categories);try{for(o.s();!(e=o.n()).done;){var n=e.value;this.form.categories.push(n._id)}}catch(a){o.e(a)}finally{o.f()}console.log(t.categories),console.log(this.nowId)},showDeleteConfirm:function(t){var e=this;this.nowId=t._id,console.log(t),this.$confirm({title:"删除",content:"确定删除该文章吗?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){Object(r["b"])(t._id).then((function(){e.requestData(),e.$notification.success({message:"成功！",description:"成功删除文章",duration:2})}))},onCancel:function(){console.log("Cancel")}})},handleOk:function(){var t=this;this.confirmLoading=!0,this.$refs.Form.validate((function(e){if(e){var o={title:t.form.title,content:t.form.content,categories:t.form.categories,abstract:t.form.abstract};""===o.abstract&&(o.abstract=o.title),console.log("Received values of form: ",o),Object(r["c"])(t.nowId,o).then((function(e){console.log(e),t.requestData(),t.$notification.success({message:"成功！",description:"成功修改文章",duration:2})}))}})),setTimeout((function(){t.visible=!1,t.confirmLoading=!1}),2e3)},handleCancel:function(){console.log("Clicked cancel button"),this.visible=!1},requestData:function(){var t=this;this.loading=!0,Object(l["a"])().then((function(e){t.categories=e})),Object(r["a"])().then((function(e){var o,n=Object(i["a"])(e);try{for(n.s();!(o=n.n()).done;){var a=o.value;a.key=a._id}}catch(r){n.e(r)}finally{n.f()}t.data=e,t.loading=!1}))}},components:{quillEditor:c["quillEditor"]}},d=u,f=o("2877"),m=Object(f["a"])(d,n,a,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0e5f34.8a908312.js.map