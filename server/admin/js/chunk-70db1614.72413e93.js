(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70db1614"],{b050:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r}));var a=n("1bab");function o(e){return Object(a["a"])({url:"category/add",method:"post",data:e})}function i(){return Object(a["a"])({url:"categories",method:"post"})}function c(e,t){return Object(a["a"])({url:"category/".concat(e),data:t,method:"put"})}function r(e){return Object(a["a"])({url:"category/".concat(e),method:"delete"})}},e2d5:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-table",{attrs:{columns:e.columns,"data-source":e.data,loading:e.loading,pagination:!1,bordered:""},scopedSlots:e._u([{key:"action",fn:function(t){return[n("span",[n("a",{on:{click:function(n){return n.preventDefault(),e.handleUpdate(t)}}},[e._v("Update")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(n){return n.preventDefault(),e.showDeleteConfirm(t)}}},[e._v("Delete")])],1)]}}])}),n("a-modal",{attrs:{title:"修改",visible:e.visible},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:12}}},[n("a-form-item",{attrs:{label:"名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入分类名"}]}],expression:"['name', { rules: [{ required: true, message: '请输入分类名' }] }]"}]})],1)],1)],1)],1)},o=[],i=(n("b0c0"),n("b85c")),c=n("b050"),r=[{title:"上级分类",dataIndex:"parent.name",width:1,key:"Parent"},{title:"分类名",dataIndex:"name",width:1,key:"Name",sorter:function(e,t){return e.name.length-t.name.length}},{title:"操作",key:"action",width:1,scopedSlots:{customRender:"action"}}],s={created:function(){this.requestData()},data:function(){return{data:[],columns:r,visible:!1,form:this.$form.createForm(this),nowId:null,cateName:null,loading:!1}},methods:{handleUpdate:function(e){this.visible=!0,this.nowId=e._id,this.cateName=e.name,console.log(this.nowId),this.$nextTick((function(){this.form.setFieldsValue({name:this.cateName})}))},showDeleteConfirm:function(e){var t=this;this.nowId=e._id,console.log(e),this.$confirm({title:"删除",content:"确定删除该分类吗?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){Object(c["b"])(e._id).then((function(){t.requestData(),t.$notification.success({message:"成功！",description:"成功删除分类",duration:2})}))},onCancel:function(){console.log("Cancel")}})},handleOk:function(){var e=this;this.confirmLoading=!0,this.form.validateFields((function(t,n){t||(console.log("Received values of form: ",n),Object(c["c"])(e.nowId,n).then((function(t){console.log(t),e.requestData(),e.$notification.success({message:"成功！",description:"成功修改分类",duration:2})})).catch((function(){e.$notification.error({message:"出错！",description:"已有同名分类",duration:2})})))})),setTimeout((function(){e.visible=!1,e.confirmLoading=!1}),2e3)},handleCancel:function(){console.log("Clicked cancel button"),this.visible=!1},requestData:function(){var e=this;this.loading=!0,Object(c["a"])().then((function(t){var n,a=Object(i["a"])(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;o.key=o._id}}catch(c){a.e(c)}finally{a.f()}e.data=t,e.loading=!1}))}}},l=s,u=n("2877"),d=Object(u["a"])(l,a,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-70db1614.72413e93.js.map