(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a8ce36a"],{"4ed6":function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n("1bab");function i(e){return Object(a["a"])({url:"adminUser/add",method:"post",data:e})}function o(){return Object(a["a"])({url:"adminUsers",method:"post"})}function r(e,t){return Object(a["a"])({url:"adminUser/".concat(e),data:t,method:"put"})}function s(e){return Object(a["a"])({url:"adminUser/".concat(e),method:"delete"})}},dc02:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-table",{attrs:{columns:e.columns,"data-source":e.data,loading:e.loading,pagination:!1,bordered:""},scopedSlots:e._u([{key:"type",fn:function(t){return[n("span",2===t?[e._v("超级管理员")]:[e._v("普通管理员")])]}},{key:"action",fn:function(t){return[n("span",[n("a",{on:{click:function(n){return n.preventDefault(),e.handleUpdate(t)}}},[e._v("Update")]),n("a-divider",{attrs:{type:"vertical"}}),n("a",{on:{click:function(n){return n.preventDefault(),e.showDeleteConfirm(t)}}},[e._v("Delete")])],1)]}}])}),n("a-modal",{attrs:{title:"修改",visible:e.visible},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-form",{attrs:{form:e.form,"label-col":{span:3},"wrapper-col":{span:12}}},[n("a-form-item",{ref:"username",attrs:{label:"用户名","has-feedback":""}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入用户名"},{validator:e.isUnique,message:"已有同名用户，请更换用户名"}]}],expression:"['username', { \n          rules: [\n            { required: true, message: '请输入用户名' },\n            { validator: isUnique, message: '已有同名用户，请更换用户名'}\n          ] \n        }]"}],attrs:{"allow-clear":""}})],1),n("a-form-item",{attrs:{label:"用户类型"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:1}],expression:"['type', {initialValue: 1}]"}],staticStyle:{width:"120px"}},[n("a-select-option",{attrs:{value:1}},[e._v("普通管理员")]),n("a-select-option",{attrs:{value:2}},[e._v("超级管理员")])],1)],1)],1)],1)],1)},i=[],o=n("b85c"),r=n("4ed6"),s=[{title:"用户名",dataIndex:"username",width:1,key:"username",sorter:function(e,t){return e.username.length-t.username.length}},{title:"权限",dataIndex:"type",width:1,key:"type",scopedSlots:{customRender:"type"}},{title:"操作",key:"action",width:1,scopedSlots:{customRender:"action"}}],c={created:function(){this.requestData()},data:function(){return{data:[],columns:s,visible:!1,form:this.$form.createForm(this),nowId:null,title:null,loading:!1}},methods:{handleUpdate:function(e){this.visible=!0,this.nowId=e._id,this.username=e.username,this.type=e.type,console.log(this.nowId),this.$nextTick((function(){this.form.setFieldsValue({username:this.username,type:this.type})}))},showDeleteConfirm:function(e){var t=this;this.nowId=e._id,console.log(e),this.$confirm({title:"删除",content:"确定删除该分类吗?",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){Object(r["b"])(e._id).then((function(){t.requestData(),t.$notification.success({message:"成功！",description:"成功删除分类",duration:2})}))},onCancel:function(){console.log("Cancel")}})},handleOk:function(){var e=this;this.confirmLoading=!0,this.form.validateFields((function(t,n){t||(console.log("Received values of form: ",n),Object(r["c"])(e.nowId,n).then((function(t){console.log(t),e.requestData(),e.$notification.success({message:"成功！",description:"成功修改分类",duration:2})})))})),setTimeout((function(){e.visible=!1,e.confirmLoading=!1}),2e3)},handleCancel:function(){console.log("Clicked cancel button"),this.visible=!1},requestData:function(){var e=this;this.loading=!0,Object(r["a"])().then((function(t){var n,a=Object(o["a"])(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.key=i._id}}catch(r){a.e(r)}finally{a.f()}e.data=t,e.loading=!1}))},isUnique:function(e,t,n){console.log(t),Object(r["a"])().then((function(e){var a,i=Object(o["a"])(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;if(r.username===t)return void n("已有同名用户，请更换用户名")}}catch(s){i.e(s)}finally{i.f()}n()}))}}},l=c,u=n("2877"),d=Object(u["a"])(l,a,i,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-0a8ce36a.12166355.js.map